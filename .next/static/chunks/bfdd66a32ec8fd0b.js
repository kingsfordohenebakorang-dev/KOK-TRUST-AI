(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),n=e.i(31178),i=e.i(47414),a=e.i(74008),l=e.i(21476),r=e.i(72846),o=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,s=(0,r.isHTMLElement)(e)&&e.offsetWidth||0,n=(0,r.isHTMLElement)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=s-i.width-i.left,i.bottom=n-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:n,anchorX:i,anchorY:a,root:l,pop:r}){let x=(0,o.useId)(),h=(0,o.useRef)(null),m=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,n=e.map(e=>{let n=d(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){let s=n[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(h,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c,bottom:d}=m.current;if(n||!1===r||!h.current||!e||!t)return;let u="left"===i?`left: ${o}`:`right: ${c}`,f="bottom"===a?`bottom: ${d}`:`top: ${s}`;h.current.dataset.motionPopId=x;let b=document.createElement("style");p&&(b.nonce=p);let g=l??document.head;return g.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{g.contains(b)&&g.removeChild(b)}},[n]),(0,t.jsx)(u,{isPresent:n,childRef:h,sizeRef:m,pop:r,children:!1===r?e:o.cloneElement(e,{ref:f})})}let h=({children:e,initial:n,isPresent:a,onExitComplete:r,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:h,root:p})=>{let f=(0,i.useConstant)(m),b=(0,s.useId)(),g=!0,y=(0,s.useMemo)(()=>(g=!1,{id:b,initial:n,isPresent:a,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;r&&r()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[a,f,r]);return c&&g&&(y={...y}),(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[a]),s.useEffect(()=>{a||f.size||!r||r()},[a]),e=(0,t.jsx)(x,{pop:"popLayout"===d,isPresent:a,anchorX:u,anchorY:h,root:p,children:e}),(0,t.jsx)(l.PresenceContext.Provider,{value:y,children:e})};function m(){return new Map}var p=e.i(64978);let f=e=>e.key||"";function b(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:l,initial:r=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:x="left",anchorY:m="top",root:g})=>{let[y,j]=(0,p.usePresence)(u),w=(0,s.useMemo)(()=>b(e),[e]),v=u&&!y?[]:w.map(f),N=(0,s.useRef)(!0),k=(0,s.useRef)(w),P=(0,i.useConstant)(()=>new Map),M=(0,s.useRef)(new Set),[C,S]=(0,s.useState)(w),[A,E]=(0,s.useState)(w);(0,a.useIsomorphicLayoutEffect)(()=>{N.current=!1,k.current=w;for(let e=0;e<A.length;e++){let t=f(A[e]);v.includes(t)?(P.delete(t),M.current.delete(t)):!0!==P.get(t)&&P.set(t,!1)}},[A,v.length,v.join("-")]);let R=[];if(w!==C){let e=[...w];for(let t=0;t<A.length;t++){let s=A[t],n=f(s);v.includes(n)||(e.splice(t,0,s),R.push(s))}return"wait"===d&&R.length&&(e=R),E(b(e)),S(w),null}let{forceRender:T}=(0,s.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:A.map(e=>{let s=f(e),n=(!u||!!y)&&(w===A||v.includes(s));return(0,t.jsx)(h,{isPresent:n,initial:(!N.current||!!r)&&void 0,custom:l,presenceAffectsLayout:c,mode:d,root:g,onExitComplete:n?void 0:()=>{if(M.current.has(s)||(M.current.add(s),!P.has(s)))return;P.set(s,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(T?.(),E(k.current),u&&j?.(),o&&o())},anchorX:x,anchorY:m,children:e},s)})})};e.s(["AnimatePresence",()=>g],88653)},55749,e=>{"use strict";var t=e.i(43476),s=e.i(71645),n=e.i(46932),i=e.i(88653),a=e.i(75157),l=e.i(75254);let r=(0,l.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var o=e.i(84614);let c=(0,l.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),d=(0,l.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var u=e.i(38488);function x({data:e}){return e&&e.nodes&&0!==e.nodes.length?(0,t.jsxs)(n.motion.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},className:"absolute bottom-6 right-6 w-[300px] h-[300px] bg-black/80 backdrop-blur-xl border border-indigo-500/30 rounded-2xl overflow-hidden shadow-2xl z-50 pointer-events-none md:pointer-events-auto",children:[(0,t.jsxs)("div",{className:"absolute top-3 left-4 text-[10px] font-mono text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),"Knowledge Graph"]}),(0,t.jsxs)("svg",{width:"300",height:"300",className:"w-full h-full",children:[e.nodes.map((s,i)=>{let a=i/e.nodes.length*Math.PI*2,l=150+80*Math.cos(a),r=150+80*Math.sin(a);return(0,t.jsx)(n.motion.line,{x1:150,y1:150,x2:l,y2:r,stroke:"rgba(99, 102, 241, 0.3)",strokeWidth:"1",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:.5}},`edge-${i}`)}),(0,t.jsx)(n.motion.circle,{cx:150,cy:150,r:6,fill:"#fff"}),e.nodes.map((s,i)=>{let a=i/e.nodes.length*Math.PI*2,l=150+80*Math.cos(a),r=150+80*Math.sin(a);return(0,t.jsxs)("g",{children:[(0,t.jsx)(n.motion.circle,{cx:l,cy:r,r:"Formula"===s.label?5:4,fill:"Formula"===s.label?"#ec4899":"#6366f1",initial:{scale:0},animate:{scale:1},transition:{delay:.2+.1*i}}),(0,t.jsx)(n.motion.text,{x:l+10,y:r+4,fill:"rgba(255,255,255,0.7)",fontSize:"10",fontFamily:"monospace",initial:{opacity:0},animate:{opacity:1},transition:{delay:1+.1*i},children:s.name.length>12?s.name.substring(0,10)+"..":s.name})]},s.id)})]})]}):null}var h=e.i(18789),m=e.i(72450),p=e.i(30380);function f({mode:e="study"}){let[l,f]=(0,s.useState)([{id:"1",role:"assistant",content:"tutor"===e?"Hello! I am your Actuarial Tutor. Ask me any conceptual question or for step-by-step problem solving.":"Hello! I'm ActuarialGPT. Upload your notes, or ask me to solve a problem."}]),[b,g]=(0,s.useState)(null),[y,j]=(0,s.useState)(""),[w,v]=(0,s.useState)(!1),N=async t=>{if(t.preventDefault(),!y.trim())return;let s={id:Date.now().toString(),role:"user",content:y};f(e=>[...e,s]),j(""),v(!0),g(null);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s.content,mode:e})}),n=await t.json();n.graph_context&&g(n.graph_context),f(e=>[...e,{id:Date.now().toString(),role:"assistant",content:n.content,steps:n.steps,final_answer:n.final_answer,citations:n.citations,graph_context:n.graph_context}])}catch(e){console.error(e)}finally{v(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-black/20 backdrop-blur-xl border-r border-white/5 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-6 bg-white/5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center border border-indigo-500/30",children:(0,t.jsx)(r,{className:"w-4 h-4 text-indigo-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-semibold text-sm text-gray-200",children:"ActuarialGPT"}),(0,t.jsxs)("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"Online"]})]})]}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-white transition-colors",children:(0,t.jsx)(d,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent",children:[(0,t.jsx)(i.AnimatePresence,{children:l.map(e=>(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,a.cn)("flex gap-4 max-w-3xl","user"===e.role?"ml-auto flex-row-reverse":""),children:[(0,t.jsx)("div",{className:(0,a.cn)("w-8 h-8 rounded-full flex items-center justify-center shrink-0 border","assistant"===e.role?"bg-indigo-500/10 border-indigo-500/20 text-indigo-400":"bg-gray-700/50 border-gray-600 text-gray-300"),children:"assistant"===e.role?(0,t.jsx)(r,{className:"w-4 h-4"}):(0,t.jsx)(o.User,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:(0,a.cn)("rounded-2xl p-4 text-sm leading-relaxed shadow-lg max-w-[85%]","assistant"===e.role?"bg-white/5 border border-white/10 text-gray-200 rounded-tl-none":"bg-indigo-600 text-white rounded-tr-none"),children:[(0,t.jsx)("div",{className:"markdown-content text-sm leading-relaxed break-words",children:(0,t.jsx)(h.default,{remarkPlugins:[m.default],rehypePlugins:[p.default],components:{h1:({node:e,...s})=>(0,t.jsx)("h1",{className:"text-lg font-bold text-indigo-300 mt-4 mb-2",...s}),h2:({node:e,...s})=>(0,t.jsx)("h2",{className:"text-base font-bold text-white mt-3 mb-2",...s}),h3:({node:e,...s})=>(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-200 mt-3 mb-1 uppercase tracking-wide",...s}),p:({node:e,...s})=>(0,t.jsx)("p",{className:"mb-3 last:mb-0",...s}),ul:({node:e,...s})=>(0,t.jsx)("ul",{className:"list-disc pl-4 mb-3 space-y-1",...s}),ol:({node:e,...s})=>(0,t.jsx)("ol",{className:"list-decimal pl-4 mb-3 space-y-1",...s}),li:({node:e,...s})=>(0,t.jsx)("li",{className:"pl-1",...s}),blockquote:({node:e,...s})=>(0,t.jsx)("blockquote",{className:"border-l-2 border-indigo-500 pl-3 italic text-gray-400 my-2",...s}),code:({node:e,...s})=>(0,t.jsx)("code",{className:"bg-black/30 px-1 py-0.5 rounded text-xs font-mono text-indigo-200",...s})},children:e.content})}),e.steps&&(0,t.jsx)("div",{className:"mt-4 space-y-3 pl-3 border-l-2 border-indigo-500/30",children:e.steps.map((e,s)=>(0,t.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,t.jsxs)("p",{className:"text-xs text-indigo-300 font-mono mb-1",children:["Step ",e.id]}),(0,t.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:e.explanation}),(0,t.jsx)(u.MathBlock,{latex:e.latex,block:!0,className:"text-sm"})]},s))}),e.final_answer&&(0,t.jsxs)("div",{className:"mt-4 pt-3 border-t border-white/10",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-green-400 uppercase tracking-wider mb-2",children:"Final Answer"}),(0,t.jsx)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3 text-center",children:(0,t.jsx)(u.MathBlock,{latex:e.final_answer,block:!0,className:"text-lg text-white"})})]}),e.citations&&(0,t.jsx)("div",{className:"mt-3 flex gap-2 flex-wrap",children:e.citations.map((e,s)=>(0,t.jsxs)("button",{className:"text-[10px] bg-white/5 hover:bg-white/10 border border-white/5 px-2 py-1 rounded-full transition-colors truncate max-w-[150px]",children:["ðŸ“š ",e.source," (p.",e.page,")"]},s))})]})]},e.id))}),w&&(0,t.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-500/10 flex items-center justify-center shrink-0 border border-indigo-500/20",children:(0,t.jsx)(r,{className:"w-4 h-4 text-indigo-400"})}),(0,t.jsxs)("div",{className:"bg-white/5 rounded-2xl p-4 rounded-tl-none flex gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-bounce",style:{animationDelay:"0ms"}}),(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-bounce",style:{animationDelay:"150ms"}}),(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-bounce",style:{animationDelay:"300ms"}})]})]})]}),(0,t.jsx)(i.AnimatePresence,{children:b&&(0,t.jsx)(x,{data:b})}),(0,t.jsx)("div",{className:"p-4 border-t border-white/5 bg-black/40 backdrop-blur-md",children:(0,t.jsxs)("form",{onSubmit:N,className:"relative",children:[(0,t.jsx)("input",{value:y,onChange:e=>j(e.target.value),placeholder:"Ask a question about your notes...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 pr-12 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 transition-all font-medium"}),(0,t.jsx)("button",{type:"submit",disabled:!y.trim()||w,className:"absolute right-2 top-2 p-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:hover:bg-indigo-600 rounded-lg text-white transition-colors",children:(0,t.jsx)(c,{className:"w-4 h-4"})})]})})]})}e.s(["ChatInterface",()=>f],55749)},21443,e=>{"use strict";var t=e.i(43476),s=e.i(45678),n=e.i(55749),i=e.i(46932);function a(){return(0,t.jsxs)("div",{className:"h-screen bg-black text-white flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Navbar,{}),(0,t.jsxs)("main",{className:"flex-1 pt-16 flex relative",children:[(0,t.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,t.jsx)("div",{className:"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-indigo-900/10 rounded-full blur-[120px]"}),(0,t.jsx)("div",{className:"absolute bottom-[-20%] right-[-10%] w-[500px] h-[500px] bg-purple-900/10 rounded-full blur-[100px]"})]}),(0,t.jsxs)("div",{className:"z-10 w-full max-w-5xl mx-auto h-full p-4 md:p-6 flex flex-col",children:[(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-300 to-purple-300",children:"Expert Actuarial Tutor"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Specialized in SOA/IFoA Exam Prep & Mathematical Reasoning."})]})}),(0,t.jsx)("div",{className:"flex-1 bg-black/40 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl shadow-2xl relative",children:(0,t.jsx)(n.ChatInterface,{mode:"tutor"})})]})]})]})}e.s(["default",()=>a])}]);